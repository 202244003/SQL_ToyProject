# LG U+ WHY NOT SW 8ê¸° - ìœ¤ì˜ˆë¹ˆ
## ğŸ’Œ SQL TOY PROJECT

## ğŸ’‡â€â™€ï¸ í”„ë¡œì íŠ¸ ì†Œê°œ

### ì£¼ì œ

- ë¯¸ìš©ì‹¤ í”„ë¡œê·¸ë¨
- ê³ ê° ê´€ë¦¬
- ë°©ë¬¸ ë‚´ì—­ ê´€ë¦¬

### ì‚¬ìš© ê¸°ìˆ 
<img src="https://img.shields.io/badge/MySQL-4479A1?style=for-the-badge&logo=MySQL&logoColor=white">
<img src="https://img.shields.io/badge/Python-3776AB?style=for-the-badge&logo=Python&logoColor=white"> - tkinter


### ê¸°ëŠ¥

- ê³ ê° ê´€ë¦¬ ê¸°ëŠ¥
    - ê³ ê° ëª©ë¡ ì—´ëŒ
        - ê³ ê° ë²ˆí˜¸, ì´ë¦„, ì—°ë½ì²˜, ì„±ë³„, ìƒë…„ì›”ì¼, ë“±ê¸‰, í¬ì¸íŠ¸, ë©”ëª¨
    - ê³ ê° ì •ë³´ ë“±ë¡
        - ì´ë¦„, ì—°ë½ì²˜, ìƒë…„ì›”ì¼, ì„±ë³„, ë©”ëª¨
        - DEFAULT í¬ì¸íŠ¸ 0, ë“±ê¸‰ â€˜ì¼ë°˜â€™
        - ë°©ë¬¸ íšŸìˆ˜ê°€ 5íšŒ ì´ìƒì´ë©´ ë“±ê¸‰ â€˜ë‹¨ê³¨â€™
        - ë°©ë¬¸ íšŸìˆ˜ê°€ 10íšŒ ì´ìƒì´ë©´ ë“±ê¸‰ â€˜VIPâ€™
        - ê²°ì œ ê¸ˆì•¡ì˜ 30% í¬ì¸íŠ¸ë¡œ ì ë¦½
    - ê³ ê° ì •ë³´ ìˆ˜ì • / ì‚­ì œ
        - ê³ ê° ì„ íƒ ì‹œ ì •ë³´ ìˆ˜ì • / ì‚­ì œ ê°€ëŠ¥
    - ê³ ê° ê²€ìƒ‰
        - ë²ˆí˜¸, ì´ë¦„, ì„±ë³„, ìƒì¼(ì›”), ë“±ê¸‰
    - ê³ ê° ëª©ë¡ ì •ë ¬
        - ê° ì»¬ëŸ¼ ë³„ë¡œ ì •ë ¬ ê°€ëŠ¥
        - ì˜¤ë¦„ì°¨ìˆœ, ë‚´ë¦¼ì°¨ìˆœ
    - ê³ ê° ë°©ë¬¸ ê¸°ë¡
        - ê³ ê° ì„ íƒ ì‹œ ë°©ë¬¸ ê¸°ë¡ ì—´ëŒ
        - ë°©ë¬¸ ë²ˆí˜¸, ë°©ë¬¸ ì¼ì, ì‹œìˆ  ì´ë¦„, ì‹œìˆ  ì„¤ëª…
- ë°©ë¬¸ ê´€ë¦¬ ê¸°ëŠ¥
    - ë°©ë¬¸ ì •ë³´ ì—´ëŒ
        - ë°©ë¬¸ ë²ˆí˜¸, ë°©ë¬¸ ì¼ì, ê³ ê° ì´ë¦„, ì‹œìˆ  ì´ë¦„, ë°©ë¬¸ ë©”ëª¨
    - ë°©ë¬¸ ì •ë³´ ë“±ë¡
        - ê³ ê°, ë°©ë¬¸ ì¼ì‹œ, ì‹œìˆ , ê²°ì œ ê¸ˆì•¡(ìë™ ì…ë ¥), ê²°ì œ ë°©ì‹, ë©”ëª¨
        - ë“œë¡­ë‹¤ìš´ í˜•ì‹ìœ¼ë¡œ ê³ ê° ë‚´ì—­ ì¤‘ ì„ íƒ
        - ì‹œìˆ  ë‹¤ì¤‘ ì„ íƒ ê°€ëŠ¥
        - ì‹œìˆ ì— ë”°ë¼ ê°€ê²© ìë™ ê³„ì‚°
    - ë°©ë¬¸ ì •ë³´ ì‚­ì œ
        - ë°©ë¬¸ ì„ íƒ ì‹œ ì •ë³´ ì‚­ì œ ê°€ëŠ¥
    - ë°©ë¬¸ ê²€ìƒ‰
        - ë²ˆí˜¸, ê³ ê° ì´ë¦„, ë°©ë¬¸ ì¼ì(ì¼), ë°©ë¬¸ ì¼ì(ì›”), ì‹œìˆ  ì´ë¦„
    - ë°©ë¬¸ ëª©ë¡ ì •ë ¬
        - ê° ì»¬ëŸ¼ ë³„ë¡œ ì •ë ¬ ê°€ëŠ¥
        - ì˜¤ë¦„ì°¨ìˆœ, ë‚´ë¦¼ì°¨ìˆœ
    - ë°©ë¬¸ ìƒì„¸ ë‚´ì—­
        - ë°©ë¬¸ ì„ íƒ ì‹œ ë°©ë¬¸ ìƒì„¸ ë‚´ì—­ ì—´ëŒ
        - ë°©ë¬¸ ë²ˆí˜¸, ê²°ì œ ê¸ˆì•¡, ê²°ì œ ë°©ì‹
- í†µê³„ ê¸°ëŠ¥
    - ì „ì²´ ì •ë³´ ì—´ëŒ
        - ë²ˆí˜¸, ê³ ê° ì´ë¦„, ìƒë…„ì›”ì¼, ë“±ê¸‰, ì´ ë°©ë¬¸ íšŸìˆ˜, ì´ ê²°ì œ ê¸ˆì•¡, ë§ˆì§€ë§‰ ë°©ë¬¸ ì¼ì
            - ì´ ë°©ë¬¸ íšŸìˆ˜
                - ê³ ê° ë³„ ë°©ë¬¸ íšŸìˆ˜ ê³„ì‚°
            - ì´ ê²°ì œ ê¸ˆì•¡
                - ê³ ê° ë³„ ê²°ì œ ê¸ˆì•¡ ê³„ì‚°
            - ë§ˆì§€ë§‰ ë°©ë¬¸ ì¼ì
                - ê³ ê° ë³„ ê°€ì¥ ìµœê·¼ ë°©ë¬¸ ì¼ì
                - ë°©ë¬¸ ì´ë ¥ì´ ì—†ìœ¼ë©´ â€˜ì—†ìŒâ€™
    - ì „ì²´ ê²€ìƒ‰
        - ë²ˆí˜¸, ê³ ê° ì´ë¦„, ìƒë…„ì›”ì¼(ì›”), ë“±ê¸‰
    - ì „ì²´ ì •ë ¬
        - ê° ì»¬ëŸ¼ ë³„ë¡œ ì •ë ¬ ê°€ëŠ¥
        - ì˜¤ë¦„ì°¨ìˆœ, ë‚´ë¦¼ì°¨ìˆœ

---

## ğŸ’¿ DB

### ERD

<img width="612" height="475" alt="ERD" src="https://github.com/user-attachments/assets/7d5ff726-330f-4f2e-bb48-f174a1ab6c33" />


### SQL

```sql
CREATE SCHEMA hairsalon;

USE hairsalon;

# ê³ ê° í…Œì´ë¸”
CREATE TABLE customer (
	customer_id INT AUTO_INCREMENT PRIMARY KEY,	-- ê³ ê° ë²ˆí˜¸
    name VARCHAR(100) NOT NULL,					-- ê³ ê° ì´ë¦„
    phone VARCHAR(20) NOT NULL,					-- ì—°ë½ì²˜
    gender ENUM('F', 'M') NOT NULL,				-- ì„±ë³„
    birth_date DATE,							-- ìƒë…„ì›”ì¼
    memo TEXT,									-- ê³ ê° ë©”ëª¨
    points INT DEFAULT 0,						-- ë³´ìœ  í¬ì¸íŠ¸
    grade ENUM('ì¼ë°˜', 'ë‹¨ê³¨', 'VIP') DEFAULT 'ì¼ë°˜' -- ê³ ê° ë“±ê¸‰
);

# ì‹œìˆ  í…Œì´ë¸”
CREATE TABLE service (
	service_id INT AUTO_INCREMENT PRIMARY KEY, 	-- ì‹œìˆ  ë²ˆí˜¸
    service_name VARCHAR(100) NOT NULL,			-- ì‹œìˆ  ì´ë¦„
    price INT NOT NULL,				-- ê°€ê²©
    service_detail TEXT 						-- ì‹œìˆ  ì„¤ëª…
); 

# ë°©ë¬¸ í…Œì´ë¸”
CREATE TABLE visit (
	visit_id INT AUTO_INCREMENT PRIMARY KEY,	-- ë°©ë¬¸ ë²ˆí˜¸
	customer_id INT NOT NULL,					-- ê³ ê° ë²ˆí˜¸
    visit_date DATETIME NOT NULL,				-- ë°©ë¬¸ ë‚ ì§œ
    note TEXT									-- ë°©ë¬¸ ë©”ëª¨
);

# ë°©ë¬¸ ìƒì„¸ í…Œì´ë¸”
CREATE TABLE visit_detail (
	visit_id INT NOT NULL,						-- ë°©ë¬¸ ë²ˆí˜¸
    service_id INT NOT NULL,					-- ì‹œìˆ  ë²ˆí˜¸
    PRIMARY KEY (visit_id, service_id)
);

# ê²°ì œ í…Œì´ë¸”
CREATE TABLE payment (
	payment_id INT AUTO_INCREMENT PRIMARY KEY,	-- ê²°ì œ ë²ˆí˜¸
    visit_id INT NOT NULL,						-- ë°©ë¬¸ ë²ˆí˜¸
    amount INT NOT NULL,				-- ê¸ˆì•¡
    method ENUM('í˜„ê¸ˆ', 'ì¹´ë“œ', 'í¬ì¸íŠ¸') NOT NULL	-- ê²°ì œ ë°©ì‹
);

# ë°©ë¬¸ í…Œì´ë¸” - ê³ ê°(ê³ ê° ë²ˆí˜¸) FK
ALTER TABLE visit
ADD CONSTRAINT fk_visit_customer
FOREIGN KEY (customer_id)
REFERENCES customer(customer_id)
ON DELETE CASCADE
ON UPDATE CASCADE;

# ë°©ë¬¸ ìƒì„¸ í…Œì´ë¸” - ë°©ë¬¸(ë°©ë¬¸ ë²ˆí˜¸) FK
ALTER TABLE visit_detail
ADD CONSTRAINT fk_visit_visit_detail
FOREIGN KEY (visit_id)
REFERENCES visit(visit_id)
ON DELETE CASCADE
ON UPDATE CASCADE;

# ë°©ë¬¸ ìƒì„¸ í…Œì´ë¸” - ì‹œìˆ (ì‹œìˆ  ë²ˆí˜¸) FK
ALTER TABLE visit_detail
ADD CONSTRAINT fk_visit_detail_service
FOREIGN KEY (service_id)
REFERENCES service(service_id)
ON DELETE CASCADE
ON UPDATE CASCADE;

# ê²°ì œ í…Œì´ë¸” - ë°©ë¬¸(ë°©ë¬¸ ë²ˆí˜¸) FK
ALTER TABLE payment
ADD CONSTRAINT fk_payment_visit
FOREIGN KEY (visit_id)
REFERENCES visit(visit_id)
ON DELETE CASCADE
ON UPDATE CASCADE;
```

---

## ğŸ“ íŒŒì¼

### íŒŒì¼ êµ¬ì¡°

```bash
SQL_ToyProject/
â”‚
â”œâ”€â”€ customer_frame.py    # ê³ ê° ëª©ë¡ ë° ê²€ìƒ‰ í™”ë©´ UI
â”œâ”€â”€ customer_reg.py      # ê³ ê° ë“±ë¡/ìˆ˜ì • í™”ë©´ UI
â”œâ”€â”€ db_manager.py        # DB ì—°ê²°, ì¿¼ë¦¬ ì‹¤í–‰, ë°ì´í„° ì²˜ë¦¬ ë¡œì§
â”œâ”€â”€ main.py              # í”„ë¡œê·¸ë¨ ì‹œì‘ì  (ì‹¤í–‰ ìŠ¤í¬ë¦½íŠ¸)
â”œâ”€â”€ main_frame.py        # ë©”ì¸ ë©”ë‰´ UI (ë²„íŠ¼/ë„¤ë¹„ê²Œì´ì…˜)
â”œâ”€â”€ main_app.py          # Tkinter App í´ë˜ìŠ¤ (í”„ë ˆì„ ì „í™˜, ì „ì²´ ë ˆì´ì•„ì›ƒ)
â”œâ”€â”€ stats_frame.py       # í†µê³„ í™”ë©´ UI
â”œâ”€â”€ visit_frame.py       # ë°©ë¬¸ ë‚´ì—­ ë° ê´€ë¦¬ í™”ë©´ UI
â””â”€â”€ visit_reg.py         # ë°©ë¬¸ ë“±ë¡/ìˆ˜ì • í™”ë©´ UI
```

### íŒŒì¼ íë¦„

```scss
main.py
  â”‚
  â””â”€â”€ main_app.py (App í´ë˜ìŠ¤)
        â”‚
        â”œâ”€â”€ main_frame.py (MainFrame)
        â”œâ”€â”€ customer_frame.py (CustomerFrame)
        â”œâ”€â”€ customer_reg.py (CustomerReg)
        â”œâ”€â”€ visit_frame.py (VisitFrame)
        â”œâ”€â”€ visit_reg.py (VisitReg)
        â””â”€â”€ stats_frame.py (StatsFrame)
        
db_manager.py  â†  (ëª¨ë“  Frameì—ì„œ DB ì—°ê²°/ì¿¼ë¦¬ ì‹¤í–‰ ì‹œ ì‚¬ìš©)

```

---

## ğŸ’» ì£¼ìš” ì½”ë“œ

### ê²€ìƒ‰

**ê³ ê° ê²€ìƒ‰**

```python
# /SQL_ToyProject/customer_frame.py

class CustomerFrame(tk.Frame):
...
		# ê³ ê° ê²€ìƒ‰
    def search_customers(self):
        search_type = self.search_var.get()
        search_value = self.search_entry.get().strip()

        base_query = "SELECT customer_id, name, phone, gender, birth_date, grade, points, memo FROM customer"
        params = []

        if search_value:
            if search_type == "ë²ˆí˜¸":
                base_query += " WHERE customer_id = %s"
                params = [search_value]
            elif search_type == "ì´ë¦„":
                base_query += " WHERE name LIKE %s"
                params = [f"%{search_value}%"]
            elif search_type == "ì„±ë³„":
                base_query += " WHERE gender = %s"
                params = [search_value]
            elif search_type == "ìƒì¼(ì›”)":
                base_query += " WHERE MONTH(birth_date) = %s"
                params = [search_value]
            elif search_type == "ë“±ê¸‰":
                base_query += " WHERE grade = %s"
                params = [search_value]

        base_query += " ORDER BY customer_id"
				...
"""
ì„ íƒëœ í•­ëª©ì— ë”°ë¼ WHEREë¬¸ì„ ì¶”ê°€í•˜ì—¬ ê³ ê° ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¨ë‹¤.
ORDER BYë¡œ customer_idë¥¼ ê¸°ì¤€ìœ¼ë¡œ ì •ë ¬í•œë‹¤.
"""
```

**ë°©ë¬¸ ë‚´ì—­ ê²€ìƒ‰**

```python
# /SQL_ToyProject/visit_frame.py

class VisitFrame(tk.Frame):
...
		# ê²€ìƒ‰
    def search_visits(self):
        search_type = self.search_var.get()
        search_value = self.search_entry.get().strip()

        base_query = """
        SELECT v.visit_id, v.visit_date, c.name, 
               GROUP_CONCAT(s.service_name SEPARATOR ', ') as services,
               v.note
        FROM visit v
        JOIN customer c ON v.customer_id = c.customer_id
        LEFT JOIN visit_detail vd ON v.visit_id = vd.visit_id
        LEFT JOIN service s ON vd.service_id = s.service_id
        """

        params = []

        if search_value:
            if search_type == "ë²ˆí˜¸":
                base_query += " WHERE v.visit_id = %s"
                params = [search_value]
            elif search_type == "ê³ ê° ì´ë¦„":
                base_query += " WHERE c.name LIKE %s"
                params = [f"%{search_value}%"]
            elif search_type == "ë°©ë¬¸ ì¼ì(ì¼)":
                base_query += " WHERE DAY(v.visit_date) = %s"
                params = [search_value]
            elif search_type == "ë°©ë¬¸ ì¼ì(ì›”)":
                base_query += " WHERE MONTH(v.visit_date) = %s"
                params = [search_value]
            elif search_type == "ì‹œìˆ  ì´ë¦„":
                base_query += " WHERE s.service_name LIKE %s"
                params = [f"%{search_value}%"]

        base_query += " GROUP BY v.visit_id ORDER BY v.visit_id"

        visits = self.controller.db_manager.fetch_all(base_query, params)
				...
"""
ì„ íƒëœ í•­ëª©ì— ë”°ë¼ WHEREë¬¸ì„ ì¶”ê°€í•˜ì—¬ ë°©ë¬¸ ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¨ë‹¤.
GROUP_CONCAT(s.service_name SEPARATOR ', ')ë¡œ ì—¬ëŸ¬ ê°œì˜ ì‹œìˆ  ë‚´ì—­ì„ ','ë¡œ ë¶„ë¦¬í•´ì„œ í•©ì¹œë‹¤
ê³ ê° ì •ë³´ë¥¼ ì—´ëŒí•˜ê¸°ìœ„í•´ visit í…Œì´ë¸”ê³¼ JOIN í•œë‹¤.
ë°©ë¬¸ ìƒì„¸, ì‹œìˆ  ì •ë³´ë¥¼ ì—´ëŒí•˜ê¸°ìœ„í•´ LEFT JOINìœ¼ë¡œ visit ê¸°ì¤€ JOINí•œë‹¤.
ORDER BYë¡œ visit_idë¥¼ ê¸°ì¤€ìœ¼ë¡œ ì •ë ¬í•œë‹¤.
"""
```

**í†µê³„ ê²€ìƒ‰**

```python
# /SQL_ToyProject/stats_frame.py

class StatsFrame(tk.Frame):
		...
    # ê²€ìƒ‰
    def search_stats(self):
        search_type = self.search_var.get()
        search_value = self.search_entry.get().strip()

        base_query = """
        SELECT c.customer_id, c.name, c.birth_date, c.grade,
               COUNT(v.visit_id) as visit_count,
               COALESCE(SUM(p.amount), 0) as total_amount,
               MAX(v.visit_date) as last_visit
        FROM customer c
        LEFT JOIN visit v ON c.customer_id = v.customer_id
        LEFT JOIN payment p ON v.visit_id = p.visit_id
        """

        params = []

        if search_value:
            if search_type == "ê³ ê° ë²ˆí˜¸":
                base_query += " WHERE c.customer_id = %s"
                params = [search_value]
            elif search_type == "ê³ ê° ì´ë¦„":
                base_query += " WHERE c.name LIKE %s"
                params = [f"%{search_value}%"]
            elif search_type == "ìƒë…„ì›”ì¼(ì›”)":
                base_query += " WHERE MONTH(c.birth_date) = %s"
                params = [search_value]
            elif search_type == "ë“±ê¸‰":
                base_query += " WHERE c.grade = %s"
                params = [search_value]

        base_query += " GROUP BY c.customer_id ORDER BY c.customer_id"

        stats = self.controller.db_manager.fetch_all(base_query, params)

        # íŠ¸ë¦¬ë·° ë‚´ìš© í´ë¦¬ì–´
        for item in self.stats_tree.get_children():
            self.stats_tree.delete(item)

        # ë°ì´í„° ì‚½ì…
        for stat in stats:
            customer_id, name, birth_date, grade, visit_count, total_amount, last_visit = stat
            birth_date_str = str(birth_date) if birth_date else ""
            last_visit_str = str(last_visit) if last_visit else "ì—†ìŒ"
            total_amount_str = f"{total_amount:,}ì›"

            self.stats_tree.insert("", "end", values=(
                customer_id, name, birth_date_str, grade,
                visit_count, total_amount_str, last_visit_str
            ))
        ...
```

### ìƒì„¸ ì •ë³´ ë¶ˆëŸ¬ì˜¤ê¸°

**ê³ ê° ë°©ë¬¸ ê¸°ë¡ ë¶ˆëŸ¬ì˜¤ê¸°**

```python
# /SQL_ToyProject/customer_frame.py

class CustomerFrame(tk.Frame):
...
		# ê³ ê° ë°©ë¬¸ ê¸°ë¡ ë¶ˆëŸ¬ì˜¤ê¸°
    def load_customer_visits(self, customer_id):
        query = """
        SELECT v.visit_id, v.visit_date, GROUP_CONCAT(s.service_name), GROUP_CONCAT(s.service_detail)
        FROM visit v
        LEFT JOIN visit_detail vd ON v.visit_id = vd.visit_id
        LEFT JOIN service s ON vd.service_id = s.service_id
        WHERE v.customer_id = %s
        GROUP BY v.visit_id, v.visit_date
        ORDER BY v.visit_id
        """

        visits = self.controller.db_manager.fetch_all(query, [customer_id])
				...
"""
GROUP_CONCAT()ë¡œ ì—¬ëŸ¬ í–‰ì˜ ë¬¸ìì—´ ê°’ì„ í•˜ë‚˜ì˜ ë¬¸ìì—´ë¡œ í•©ì¹œë‹¤. (ì—¬ëŸ¬ê°œì˜ ì‹œìˆ ì„ ë°›ì€ ê²½ìš°)
ë°©ë¬¸ ìƒì„¸ ë‚´ìš©ê³¼ ì‹œìˆ  ì •ë³´ë¥¼ ì—´ëŒí•˜ê¸° ìœ„í•´ ê°ê° LEFT JOINìœ¼ë¡œ visit ê¸°ì¤€ JOINí•œë‹¤. 
"""
```

**ë°©ë¬¸ ìƒì„¸ ë¶ˆëŸ¬ì˜¤ê¸°**

```python
# /SQL_ToyProject/visit_frame.py

class VisitFrame(tk.Frame):
...
		# ë°©ë¬¸ ìƒì„¸ ë¶ˆëŸ¬ì˜¤ê¸°
    def load_visit_details(self, visit_id):
        query = """
        SELECT p.payment_id, p.amount, p.method
        FROM payment p
        WHERE p.visit_id = %s
        """

        payments = self.controller.db_manager.fetch_all(query, [visit_id])

        # ìƒì„¸ íŠ¸ë¦¬ë·° í´ë¦¬ì–´
        for item in self.detail_tree.get_children():
            self.detail_tree.delete(item)

        for payment in payments:
            payment_id, amount, method = payment
            self.detail_tree.insert("", "end", values=(visit_id, f"{amount:,}ì›", method))
				...
"""
ë°©ë¬¸ ìƒì„¸ ì •ë³´ë¥¼ ì„ íƒí•œ ë°©ë¬¸ ë²ˆí˜¸ë¥¼ ê¸°ì¤€ìœ¼ë¡œ ê²€ìƒ‰í•œë‹¤.
"""
```

### ë“±ë¡ / ìˆ˜ì •

**ê³ ê° ì •ë³´ ë“±ë¡/ìˆ˜ì •**

```python
# /SQL_ToyProject/customer_reg.py

class CustomerRegistrationDialog:
...
		# ì €ì¥
    def save_customer(self):
        name = self.name_var.get().strip()
        phone = self.phone_var.get().strip()
        gender = self.gender_var.get()
        birth = self.birth_var.get().strip() if self.birth_var.get().strip() else None
        memo = self.memo_text.get("1.0", tk.END).strip()

	      if not name or not phone or not gender or not birth:
            messagebox.showerror("ì…ë ¥ ì˜¤ë¥˜", "í•„ìˆ˜ ì…ë ¥ ì‚¬í•­ì…ë‹ˆë‹¤.")
            return

        if self.customer_data is None:
            # ìƒˆ ê³ ê° ë“±ë¡ (ë“±ê¸‰ê³¼ í¬ì¸íŠ¸ëŠ” ê¸°ë³¸ê°’ ì‚¬ìš©)
            query = """INSERT INTO customer (name, phone, gender, birth_date, memo) 
                       VALUES (%s, %s, %s, %s, %s)"""
            params = (name, phone, gender, birth, memo)
        else:
            # ê¸°ì¡´ ê³ ê° ìˆ˜ì •
            query = """UPDATE customer SET name=%s, phone=%s, gender=%s, birth_date=%s, memo=%s 
                       WHERE customer_id=%s"""
            params = (name, phone, gender, birth, memo, self.customer_data[0])

        if self.db_manager.execute_query(query, params):
            messagebox.showinfo("ì„±ê³µ", "ê³ ê° ì •ë³´ê°€ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.")
            if self.customer_frame:
                self.customer_frame.search_customers()
            self.dialog.destroy()
				...
"""
INSERTë¥¼ í†µí•´ ìƒˆë¡œìš´ ê³ ê° ì •ë³´ë¥¼ ì €ì¥í•œë‹¤.
UPDATEë¥¼ í†µí•´ ê¸°ì¡´ ê³ ê° ì •ë³´ë¥¼ ìˆ˜ì •í•œë‹¤.
"""
```

### ì •ë ¬

**ê³ ê° ëª©ë¡ ì •ë ¬**

```python
# /SQL_ToyProject/customer_frame.py

class CustomerFrame(tk.Frame):
...
    def get_sql_column_name(self, column):
        mapping = {
            "ë²ˆí˜¸": "customer_id",
            "ì´ë¦„": "name",
            "ì—°ë½ì²˜": "phone",
            "ì„±ë³„": "gender",
            "ìƒë…„ì›”ì¼": "birth_date",
            "ë“±ê¸‰": "grade",
            "í¬ì¸íŠ¸": "points",
            "ë©”ëª¨": "memo"
        }
        return mapping.get(column, "customer_id")

    # ê³ ê° ì •ë ¬
    def sort_customers(self, column):
        # ì •ë ¬ ë°©í–¥ í† ê¸€
        reverse = self.sort_reverse.get(column, False)
        self.sort_reverse[column] = not reverse

        # ëª¨ë“  í—¤ë”ì˜ ì •ë ¬ í‘œì‹œ ì œê±°
        for col in self.customer_tree["columns"]:
            original_text = col.replace(" â–¼", "").replace(" â–²", "")
            self.customer_tree.heading(col, text=original_text)

        # í˜„ì¬ ì»¬ëŸ¼ì— ì •ë ¬ ë°©í–¥ í‘œì‹œ
        sort_symbol = " â–²" if reverse else " â–¼"
        self.customer_tree.heading(column, text=column + sort_symbol)

        # SQL ì»¬ëŸ¼ëª… ë³€í™˜
        sql_column = self.get_sql_column_name(column)
        order_direction = "DESC" if reverse else "ASC"

        # DBì—ì„œ ì •ë ¬ëœ ë°ì´í„° ë¶ˆëŸ¬ì˜¤ê¸°
        query = f"""
            SELECT customer_id, name, phone, gender, birth_date, grade, points, memo
            FROM customer
            ORDER BY {sql_column} {order_direction}
        """
        results = self.controller.db_manager.fetch_all(query)
        ...
"""
ëª¨ë“  ì»¬ëŸ¼ì„ ê¸°ì¤€ìœ¼ë¡œ ì •ë ¬ ê°€ëŠ¥.
ê° ì»¬ëŸ¼ì€ í† ê¸€ ë°©ì‹ìœ¼ë¡œ ê¸°ë³¸ ì˜¤ë¦„ì°¨ìˆœì—ì„œ ë‚´ë¦¼ì°¨ìˆœ ë³€ê²½ ê°€ëŠ¥.
DBì—ì„œ ORDER BYì ˆì„ í™œìš©í•´ ì„ íƒëœ ì»¬ëŸ¼, ë°©í–¥ ì§€ì •í•˜ì—¬ ì •ë ¬
"""
```

**ë°©ë¬¸ ëª©ë¡ ì •ë ¬**

```python
# /SQL_ToyProject/visit_frame.py

class VisitFrame(tk.Frame):
...
		# ì •ë ¬
    def sort_visits(self, column):
		    ...
				# SQL ì»¬ëŸ¼ëª… ë³€í™˜
        sql_column = self.get_sql_column_name(column)
        order_direction = "DESC" if reverse else "ASC"

				query = f"""
            SELECT v.visit_id, v.visit_date, c.name, 
                   GROUP_CONCAT(s.service_name SEPARATOR ', ') AS services,
                   v.note
            FROM visit v
            JOIN customer c ON v.customer_id = c.customer_id
            LEFT JOIN visit_detail vd ON v.visit_id = vd.visit_id
            LEFT JOIN service s ON vd.service_id = s.service_id
            GROUP BY v.visit_id, v.visit_date, c.name, v.note
            ORDER BY {sql_column} {order_direction}
        """
        results = self.controller.db_manager.fetch_all(query)
        ...
"""
ëª¨ë“  ì»¬ëŸ¼ì„ ê¸°ì¤€ìœ¼ë¡œ ì •ë ¬ ê°€ëŠ¥.
ê° ì»¬ëŸ¼ì€ í† ê¸€ ë°©ì‹ìœ¼ë¡œ ê¸°ë³¸ ì˜¤ë¦„ì°¨ìˆœì—ì„œ ë‚´ë¦¼ì°¨ìˆœ ë³€ê²½ ê°€ëŠ¥.
DBì—ì„œ ORDER BYì ˆì„ í™œìš©í•´ ì„ íƒëœ ì»¬ëŸ¼, ë°©í–¥ ì§€ì •í•˜ì—¬ ì •ë ¬
"""
```

**í†µê³„ ì •ë ¬**

```python
# /SQL_ToyProject/stats_frame.py

class StatsFrame(tk.Frame):
		def sort_stats(self, column):
				...
				# SQL ì»¬ëŸ¼ëª… ë³€í™˜
        sql_column = self.get_sql_column_name(column)
        order_direction = "DESC" if reverse else "ASC"

        # DBì—ì„œ ì •ë ¬ëœ ë°ì´í„° ë¶ˆëŸ¬ì˜¤ê¸°
        query = f"""
            SELECT c.customer_id, c.name, c.birth_date, c.grade,
                   COUNT(v.visit_id) AS visit_count,
                   COALESCE(SUM(p.amount), 0) AS total_amount,
                   MAX(v.visit_date) AS last_visit
            FROM customer c
            LEFT JOIN visit v ON c.customer_id = v.customer_id
            LEFT JOIN payment p ON v.visit_id = p.visit_id
            GROUP BY c.customer_id, c.name, c.birth_date, c.grade
            ORDER BY {sql_column} {order_direction}
        """
        results = self.controller.db_manager.fetch_all(query)
        ...
"""
ëª¨ë“  ì»¬ëŸ¼ì„ ê¸°ì¤€ìœ¼ë¡œ ì •ë ¬ ê°€ëŠ¥.
ê° ì»¬ëŸ¼ì€ í† ê¸€ ë°©ì‹ìœ¼ë¡œ ê¸°ë³¸ ì˜¤ë¦„ì°¨ìˆœì—ì„œ ë‚´ë¦¼ì°¨ìˆœ ë³€ê²½ ê°€ëŠ¥.
DBì—ì„œ ORDER BYì ˆì„ í™œìš©í•´ ì„ íƒëœ ì»¬ëŸ¼, ë°©í–¥ ì§€ì •í•˜ì—¬ ì •ë ¬
"""
```

---
### ì¶”ê°€ ëª©í‘œ

- ë°©ë¬¸ ë‚´ì—­ ìˆ˜ì • ê¸°ëŠ¥
- ë°©ë¬¸ ë‚´ì—­ ì¶”ê°€ ì‹œ ë‹¤ì¤‘ ê²°ì œ ê¸°ëŠ¥
- ì‹œìˆ  ì •ë³´ ì¶”ê°€/ìˆ˜ì •/ì‚­ì œ ê¸°ëŠ¥
- ì‹œìˆ  ë³„ ì†Œìš” ì‹œê°„ ì¶”ê°€ í›„ ë°©ë¬¸ ì‹œê°„ ì¡°ì ˆ ê¸°ëŠ¥